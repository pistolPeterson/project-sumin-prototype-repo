<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Sample-based maps </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Sample-based maps ">
    <meta name="generator" content="docfx 2.59.4.0">
    
    <link rel="stylesheet" href="https://mapgraph.insanescatterbrain.com/styles/docfx.vendor.css">
    <link rel="stylesheet" href="https://mapgraph.insanescatterbrain.com/styles/featherlight.min.css">
    <link rel="stylesheet" href="https://mapgraph.insanescatterbrain.com/styles/docfx.css">
    <link rel="stylesheet" href="https://mapgraph.insanescatterbrain.com/styles/main.css">
    <meta property="docfx:navrel" content="../toc">
    <meta property="docfx:tocrel" content="toc">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                Home
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
                
                <ul class="nav level1 navbar-nav">
                      <li>
                          <a href="../manual/getting_started.html" title="Manual">Manual</a>
                      </li>
                      <li>
                          <a href="../nodes.html" title="Node Index">Node Index</a>
                      </li>
                      <li>
                          <a href="../api/InsaneScatterbrain.html" title="API">API</a>
                      </li>
                      <li>
                          <a href="../changelog.html" title="Changelog">Changelog</a>
                      </li>
                </ul>    </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div>
              <div class="sidetoc">
                <div class="toc manual" id="toc">
                  
                  <ul class="nav level1">
                    <li class="">
                      <span class="expand-stub"></span>
                      <a href="creating_your_first_map_graph.html" title="Tutorials" class="">Tutorials</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <span class="expand-stub"></span>
                            <a href="creating_your_first_map_graph.html" title="Creating your first map generator" class="">Creating your first map generator</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="creating_your_first_map_graph.html" title="1. Creating your first map graph" class="">1. Creating your first map graph</a>
                                </li>
                                <li class="">
                                  <a href="running_a_graph_at_runtime.html" title="2. Running a graph at runtime" class="">2. Running a graph at runtime</a>
                                </li>
                                <li class="">
                                  <a href="adding_more_nodes.html" title="3. Adding more nodes" class="">3. Adding more nodes</a>
                                </li>
                                <li class="">
                                  <a href="object_placement.html" title="4. Object placement" class="">4. Object placement</a>
                                </li>
                              </ul>  </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a href="cave-like_maps.html" title="Basic map types" class="">Basic map types</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="cave-like_maps.html" title="&#8226; Cave-like maps" class="">&#8226; Cave-like maps</a>
                                </li>
                                <li class="">
                                  <a href="room-based_maps.html" title="&#8226; Room-based maps" class="">&#8226; Room-based maps</a>
                                </li>
                                <li class="active">
                                  <a href="sample-based_maps.html" title="&#8226; Sample-based maps" class="active">&#8226; Sample-based maps</a>
                                </li>
                                <li class="">
                                  <a href="combining_map_types.html" title="&#8226; Combining map types" class="">&#8226; Combining map types</a>
                                </li>
                              </ul>  </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a href="linked_named_color_sets.html" title="More Tutorials" class="">More Tutorials</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="using_prefabs_instead_of_tilemaps.html" title="&#8226; Using prefabs instead of tilemaps" class="">&#8226; Using prefabs instead of tilemaps</a>
                                </li>
                                <li class="">
                                  <a href="changing_type_entry_probability.html" title="&#8226; Changing tile/prefab/tilemap set probabilities (weighted random)" class="">&#8226; Changing tile/prefab/tilemap set probabilities (weighted random)</a>
                                </li>
                                <li class="">
                                  <a href="linked_named_color_sets.html" title="&#8226; Linking a named color set to tilesets/prefab sets" class="">&#8226; Linking a named color set to tilesets/prefab sets</a>
                                </li>
                                <li class="">
                                  <a href="groups.html" title="&#8226; Organizing nodes into groups" class="">&#8226; Organizing nodes into groups</a>
                                </li>
                                <li class="">
                                  <a href="notes.html" title="&#8226; Adding notes &amp; comments" class="">&#8226; Adding notes &amp; comments</a>
                                </li>
                                <li class="">
                                  <a href="running_a_graph_within_a_graph.html" title="&#8226; Running a graph within a graph (Sub graphs)" class="">&#8226; Running a graph within a graph (Sub graphs)</a>
                                </li>
                                <li class="">
                                  <a href="tilemap_sets.html" title="&#8226; Tilemap Sets" class="">&#8226; Tilemap Sets</a>
                                </li>
                                <li class="">
                                  <a href="optimization_tips.html" title="&#8226; Optimization tips" class="">&#8226; Optimization tips</a>
                                </li>
                                <li class="">
                                  <a href="static_seed.html" title="&#8226; Static seed (daily challenges)" class="">&#8226; Static seed (daily challenges)</a>
                                </li>
                                <li class="">
                                  <a href="running_a_graph_asynchronously.html" title="&#8226; Running a graph asynchronously/multi-threaded" class="">&#8226; Running a graph asynchronously/multi-threaded</a>
                                </li>
                                <li class="">
                                  <a href="object_pooling.html" title="&#8226; Object pooling" class="">&#8226; Object pooling</a>
                                </li>
                                <li class="">
                                  <a href="unity_rule_tiles.html" title="&#8226; Tips for rule tiles" class="">&#8226; Tips for rule tiles</a>
                                </li>
                                <li class="">
                                  <a href="save_load_maps.html" title="&#8226; Saving and loading maps" class="">&#8226; Saving and loading maps</a>
                                </li>
                              </ul>  </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a href="creating_your_first_map_graph.html" title="Tutorials for coders" class="">Tutorials for coders</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="running_graphs_from_scripts.html" title="&#8226; Running graphs from scripts" class="">&#8226; Running graphs from scripts</a>
                                </li>
                                <li class="">
                                  <a href="output_parameters.html" title="&#8226; Output parameters" class="">&#8226; Output parameters</a>
                                </li>
                                <li class="">
                                  <a href="creating_your_own_nodes.html" title="&#8226; Creating your own nodes" class="">&#8226; Creating your own nodes</a>
                                </li>
                                <li class="">
                                  <a href="creating_your_own_node_views.html" title="&#8226; Creating your own node views" class="">&#8226; Creating your own node views</a>
                                </li>
                                <li class="">
                                  <a href="adding_a_constant_node_type.html" title="&#8226; Adding a constant node type" class="">&#8226; Adding a constant node type</a>
                                </li>
                                <li class="">
                                  <a href="custom_styling_for_the_graph_editor.html" title="&#8226; Custom styling for the graph editor" class="">&#8226; Custom styling for the graph editor</a>
                                </li>
                              </ul>  </li>
                        </ul>  </li>
                    <li class="">
                      <a href="sample_project.html" title="Sample Project" class="">Sample Project</a>
                    </li>
                    <li class="">
                      <a href="troubleshooting.html" title="Troubleshooting" class="">Troubleshooting</a>
                    </li>
                    <li class="">
                      <a href="support.html" title="Support" class="">Support</a>
                    </li>
                  </ul>        </div>
              </div>
            </div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">

<div class="zoomable-images">
<h1 id="sample-based-maps">Sample-based maps</h1>
<p>Let's take a look at how to generate maps based on user-provided samples using the Waveform Function
Collapse node.</p>
<h2 id="waveform-function-collapse-wfc">Waveform Function Collapse (WFC)</h2>
<p>If you've read the <a href="cave-like_maps.html">Cave-like maps page</a> or <a href="room-based_maps.html">Room-based maps page</a>,
you might have already seen examples of how to use the WFC node.</p>
<p>WFC was originally developed by Maxim Gumin and it's a great algorithm to generate all kinds of different
random patterns. If you're interested, you can check out the original algorithm
<a href="https://github.com/mxgmn/WaveFunctionCollapse">here</a>. If you want to know more about the
<a href="../nodes.html#waveform-function-collapse">Waveform Function Collapse node</a>, you
can check it out <a href="../nodes.html#waveform-function-collapse">here in the node index</a>.</p>
<p>In short, WFC allows you to generate a random pattern, which is locally similar to a sample pattern. The great thing about this,
is that you can create many different types of patterns, while using the same algorithm.</p>
<p>For example, here's the WFC example graph from the <a href="cave-like_maps.html">Cave-like maps page</a>.</p>
<p><img src="../images/tutorials/cave-like_maps/wfc_basic_example.png" alt="WFC basic example"></p>
<p>Sample used:
<img src="../images/tutorials/cave-like_maps/wfc_basic_example_sample.png" alt="WFC basic example sample"></p>
<p>Now, let's compare this graph to the WFC example graph from the <a href="room-based_maps.html">Room-based maps page</a>.</p>
<p><img src="../images/tutorials/room-based_maps/wfc_example.png" alt="Room-based example"></p>
<p>Sample used:
<img src="../images/tutorials/room-based_maps/wfc_example_sample.png" alt="Room-based sample"></p>
<p>These are the exact same graphs, but they generate completely different outputs, simply by providing a different
sample texture.</p>
<h2 id="the-sample-texture">The sample texture</h2>
<p>Because the sample texture should be very simple, you can make your own in almost any tool you want (something like Paint is
perfectly fine) and simply add them to your Unity project.</p>
<p>You might want to make sure the sample texture consists of the same colors as those in the graph's
Named Color Set. For the examples above, it would make sense to have named colors &quot;Wall&quot; and &quot;Floor&quot;, where
&quot;Wall&quot; is black and &quot;Floor&quot; is white.</p>
<p>Make sure you don't save your sample textures in a format that might mess up the colors due to compression, such as JPG.
PNG would be a better choice.</p>
<p>You'll also want to adjust the sample texture's import settings:</p>
<ul>
<li>Set &quot;Compression&quot; to &quot;None&quot;</li>
<li>Set &quot;Filter Mode&quot; to &quot;Point&quot;</li>
<li>Check &quot;Read/Write Enabled&quot;</li>
</ul>
<p><img src="../images/tutorials/sample-based_maps/wfc_sample_import_settings.png" alt="Sample Texture Import Setting"></p>
<h2 id="texture-to-data">Texture To Data</h2>
<p>You'll notice that the sample texture is passed through a <a href="../nodes.html#texture-to-data">Texture To Data node</a>. This is necessary,
because imported images are stored as Texture2D objects and Map Graph works with its own TextureData objects.</p>
<h2 id="alikeness">&quot;Alikeness&quot;</h2>
<p>Adjusting the N value will allow you to tweak how much the output looks like the sample input. A higher value will extract
bigger features from the sample texture, but will have a significant negative impact on performance. The default N value is 3,
which strikes a good balance between performance and quality of the output, for most cases.</p>
<table>
    <tr>
        <td>Lower N (2)</td>
        <td>Higher N (4)</td>
    </tr>
    <tr>
        <td>
            <img alt="Lower N" src="../images/tutorials/sample-based_maps/wfc_example_n_2.png">
        </td>
        <td>
            <img alt="Higher N" src="../images/tutorials/sample-based_maps/wfc_example_n_4.png">
        </td>
    </tr>
</table>
<h2 id="tileable">Tileable</h2>
<p>Setting &quot;Tileable Sample?&quot; to true, will tell WFC that the input texture is tileable.</p>
<p>Setting &quot;Tileable Output?&quot; to true, will make WFC output a texture that's tileable.</p>
<p>These things do come with a performance cost, so you'll only want to enable these features, when needed.</p>
<h2 id="symmetry">Symmetry</h2>
<p>Setting reflectional symmetry to true, will tell WFC to use mirrored versions of all the patterns it extracts from
the sample texture.</p>
<p>Setting rotational symmetry will tell WFC to use rotated versions of the extracted patterns. Setting it to Two Way will create
an additional 180 degree rotated version. Setting it to Four Way, will create three additional versions rotated
by 90, 180 and 270 degrees.</p>
<p>Adding reflectional and rotational symmetry gives you more variety in the output, but doesn't always lead to desirable output.</p>
<p>For example, if you'd want to generate a level for a side-scrolling game, using this sample:
<img src="../images/tutorials/sample-based_maps/wfc_platformer_sample.png" alt="Platformer Sample">,
enabling symmetry probably won't produce the desired result.</p>
<table>
    <tr>
        <td>No Symmetry</td>
        <td>Symmetry</td>
    </tr>
    <tr>
        <td>
            <img alt="No Symmetry" src="../images/tutorials/sample-based_maps/wfc_platformer_no_symmetry.png">
        </td>
        <td>
            <img alt="Symmetry" src="../images/tutorials/sample-based_maps/wfc_platformer_symmetry.png">
        </td>
    </tr>
</table>
<h2 id="performance-tips">Performance Tips</h2>
<p>One of the disadvantages of using WFC over more traditional techniques such as Cellular Automata and BSP trees, is
that it requires a lot more performance. Depending on the parameters, it can take some time to run.</p>
<p>Tips to avoid performance issues:</p>
<ul>
<li>Don't use a larger sample texture than necessary. For example, the sample textures shown above are 16x16 pixels in size.</li>
<li>Keep N small. It's set to 3 by default and that usually produces desirable results.</li>
<li>Setting the sample and/or output as tileable will negatively impact performance, so only enable that if you need to.</li>
<li>Same goes for reflectional and rotational symmetry.</li>
<li>Keep the output size as small as possible.</li>
<li><a href="optimization_tips.html">Enable &quot;Debug Info&quot; to see how much time the Waveform Function Collapse node takes to complete.</a>
This is very useful to see the effects on performance of any changes you make.</li>
</ul>
</div>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="https://mapgraph.insanescatterbrain.com/styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="https://mapgraph.insanescatterbrain.com/styles/featherlight.min.js"></script>
    <script type="text/javascript" src="https://mapgraph.insanescatterbrain.com/styles/docfx.js"></script>
    <script type="text/javascript" src="https://mapgraph.insanescatterbrain.com/styles/main.js"></script>
  </body>
</html>
