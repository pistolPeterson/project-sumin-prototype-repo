<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Cave-like maps </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Cave-like maps ">
    <meta name="generator" content="docfx 2.59.4.0">
    
    <link rel="stylesheet" href="https://mapgraph.insanescatterbrain.com/styles/docfx.vendor.css">
    <link rel="stylesheet" href="https://mapgraph.insanescatterbrain.com/styles/featherlight.min.css">
    <link rel="stylesheet" href="https://mapgraph.insanescatterbrain.com/styles/docfx.css">
    <link rel="stylesheet" href="https://mapgraph.insanescatterbrain.com/styles/main.css">
    <meta property="docfx:navrel" content="../toc">
    <meta property="docfx:tocrel" content="toc">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                Home
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
                
                <ul class="nav level1 navbar-nav">
                      <li>
                          <a href="../manual/getting_started.html" title="Manual">Manual</a>
                      </li>
                      <li>
                          <a href="../nodes.html" title="Node Index">Node Index</a>
                      </li>
                      <li>
                          <a href="../api/InsaneScatterbrain.html" title="API">API</a>
                      </li>
                      <li>
                          <a href="../changelog.html" title="Changelog">Changelog</a>
                      </li>
                </ul>    </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div>
              <div class="sidetoc">
                <div class="toc manual" id="toc">
                  
                  <ul class="nav level1">
                    <li class="">
                      <span class="expand-stub"></span>
                      <a href="creating_your_first_map_graph.html" title="Tutorials" class="">Tutorials</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <span class="expand-stub"></span>
                            <a href="creating_your_first_map_graph.html" title="Creating your first map generator" class="">Creating your first map generator</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="creating_your_first_map_graph.html" title="1. Creating your first map graph" class="">1. Creating your first map graph</a>
                                </li>
                                <li class="">
                                  <a href="running_a_graph_at_runtime.html" title="2. Running a graph at runtime" class="">2. Running a graph at runtime</a>
                                </li>
                                <li class="">
                                  <a href="adding_more_nodes.html" title="3. Adding more nodes" class="">3. Adding more nodes</a>
                                </li>
                                <li class="">
                                  <a href="object_placement.html" title="4. Object placement" class="">4. Object placement</a>
                                </li>
                              </ul>  </li>
                          <li class="active">
                            <span class="expand-stub"></span>
                            <a href="cave-like_maps.html" title="Basic map types" class="active">Basic map types</a>
                              
                              <ul class="nav level3">
                                <li class="active">
                                  <a href="cave-like_maps.html" title="&#8226; Cave-like maps" class="active">&#8226; Cave-like maps</a>
                                </li>
                                <li class="">
                                  <a href="room-based_maps.html" title="&#8226; Room-based maps" class="">&#8226; Room-based maps</a>
                                </li>
                                <li class="">
                                  <a href="sample-based_maps.html" title="&#8226; Sample-based maps" class="">&#8226; Sample-based maps</a>
                                </li>
                                <li class="">
                                  <a href="combining_map_types.html" title="&#8226; Combining map types" class="">&#8226; Combining map types</a>
                                </li>
                              </ul>  </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a href="linked_named_color_sets.html" title="More Tutorials" class="">More Tutorials</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="using_prefabs_instead_of_tilemaps.html" title="&#8226; Using prefabs instead of tilemaps" class="">&#8226; Using prefabs instead of tilemaps</a>
                                </li>
                                <li class="">
                                  <a href="changing_type_entry_probability.html" title="&#8226; Changing tile/prefab/tilemap set probabilities (weighted random)" class="">&#8226; Changing tile/prefab/tilemap set probabilities (weighted random)</a>
                                </li>
                                <li class="">
                                  <a href="linked_named_color_sets.html" title="&#8226; Linking a named color set to tilesets/prefab sets" class="">&#8226; Linking a named color set to tilesets/prefab sets</a>
                                </li>
                                <li class="">
                                  <a href="groups.html" title="&#8226; Organizing nodes into groups" class="">&#8226; Organizing nodes into groups</a>
                                </li>
                                <li class="">
                                  <a href="notes.html" title="&#8226; Adding notes &amp; comments" class="">&#8226; Adding notes &amp; comments</a>
                                </li>
                                <li class="">
                                  <a href="running_a_graph_within_a_graph.html" title="&#8226; Running a graph within a graph (Sub graphs)" class="">&#8226; Running a graph within a graph (Sub graphs)</a>
                                </li>
                                <li class="">
                                  <a href="tilemap_sets.html" title="&#8226; Tilemap Sets" class="">&#8226; Tilemap Sets</a>
                                </li>
                                <li class="">
                                  <a href="optimization_tips.html" title="&#8226; Optimization tips" class="">&#8226; Optimization tips</a>
                                </li>
                                <li class="">
                                  <a href="static_seed.html" title="&#8226; Static seed (daily challenges)" class="">&#8226; Static seed (daily challenges)</a>
                                </li>
                                <li class="">
                                  <a href="running_a_graph_asynchronously.html" title="&#8226; Running a graph asynchronously/multi-threaded" class="">&#8226; Running a graph asynchronously/multi-threaded</a>
                                </li>
                                <li class="">
                                  <a href="object_pooling.html" title="&#8226; Object pooling" class="">&#8226; Object pooling</a>
                                </li>
                                <li class="">
                                  <a href="unity_rule_tiles.html" title="&#8226; Tips for rule tiles" class="">&#8226; Tips for rule tiles</a>
                                </li>
                                <li class="">
                                  <a href="save_load_maps.html" title="&#8226; Saving and loading maps" class="">&#8226; Saving and loading maps</a>
                                </li>
                              </ul>  </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a href="creating_your_first_map_graph.html" title="Tutorials for coders" class="">Tutorials for coders</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="running_graphs_from_scripts.html" title="&#8226; Running graphs from scripts" class="">&#8226; Running graphs from scripts</a>
                                </li>
                                <li class="">
                                  <a href="output_parameters.html" title="&#8226; Output parameters" class="">&#8226; Output parameters</a>
                                </li>
                                <li class="">
                                  <a href="creating_your_own_nodes.html" title="&#8226; Creating your own nodes" class="">&#8226; Creating your own nodes</a>
                                </li>
                                <li class="">
                                  <a href="creating_your_own_node_views.html" title="&#8226; Creating your own node views" class="">&#8226; Creating your own node views</a>
                                </li>
                                <li class="">
                                  <a href="adding_a_constant_node_type.html" title="&#8226; Adding a constant node type" class="">&#8226; Adding a constant node type</a>
                                </li>
                                <li class="">
                                  <a href="custom_styling_for_the_graph_editor.html" title="&#8226; Custom styling for the graph editor" class="">&#8226; Custom styling for the graph editor</a>
                                </li>
                              </ul>  </li>
                        </ul>  </li>
                    <li class="">
                      <a href="sample_project.html" title="Sample Project" class="">Sample Project</a>
                    </li>
                    <li class="">
                      <a href="troubleshooting.html" title="Troubleshooting" class="">Troubleshooting</a>
                    </li>
                    <li class="">
                      <a href="support.html" title="Support" class="">Support</a>
                    </li>
                  </ul>        </div>
              </div>
            </div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">

<div class="zoomable-images">
<h1 id="cave-like-maps">Cave-like maps</h1>
<p>There are many different ways to create cave-like patterns for your maps. We will look at three of them:
Cellular Automata, Perlin noise and Waveform Function Collapse (WFC). You'll also learn how to use these (and other)
techniques to create your own unique cave patterns.</p>
<h2 id="cellular-automata">Cellular Automata</h2>
<p>You can create cave-like patterns by connecting a Randomly Fill Texture and a Cellular Automata Smoothing node. Please
check out the <a href="adding_more_nodes.html">&quot;Adding more nodes&quot; section</a> of the
<a href="creating_your_first_map_graph.html">&quot;Creating your first map generator&quot;</a> tutorial to learn how.</p>
<p>If you want to know more about the Cellular Automata Smoothing node, you can find it in the
<a href="../nodes.html#cellular-automata-smoothing">node index</a>.</p>
<h2 id="perlin-noise">Perlin Noise</h2>
<p>Another way to create cave-like patterns is by generating Perlin noise.</p>
<p>Here is a basic example graph:
<img src="../images/tutorials/cave-like_maps/perlin_noise_basic_example.png" alt="Perlin noise basic example"></p>
<h3 id="adjusting-scale">Adjusting scale</h3>
<p>Changing the scale basically allows you to create a more zoomed in/out looking pattern.</p>
<p>Here's what different scale values look like.</p>
<table>
    <tr>
        <td>Lower scale (4)</td>
        <td>Higher scale (16)</td>
    </tr>
    <tr>
        <td>
            <img alt="Perlin lower lower scale value" src="../images/tutorials/cave-like_maps/perlin_noise_lower_scale_value.png">
        </td>
        <td>
            <img alt="Perlin noise higher scale value" src="../images/tutorials/cave-like_maps/perlin_noise_higher_scale_value.png">
        </td>
    </tr>
</table>
<h3 id="adjusting-threshold">Adjusting threshold</h3>
<p>Threshold determines which of the two colors is used for each pixel. A noise value is calculated for each pixel
between 0 and 100. A pixel with a value above the threshold will gets assigned the &quot;Filled Color&quot;, a pixel below the
threshold gets assigned the &quot;Empty Color&quot;. If no threshold is specified, the default value 50 is used.</p>
<p>In short, increasing the threshold will make it so more pixels have the &quot;Empty Color&quot;, whereas reducing the threshold
will make it so more pixels have the &quot;Filled Color&quot;.</p>
<table>
    <tr>
        <td>Lower threshold (40)</td>
        <td>Higher threshold (60)</td>
    </tr>
    <tr>
        <td>
            <img alt="Perlin noise lower threshold" src="../images/tutorials/cave-like_maps/perlin_noise_lower_threshold.png">
        </td>
        <td>
            <img alt="Perlin noise higher threshold" src="../images/tutorials/cave-like_maps/perlin_noise_higher_threshold.png">
        </td>
    </tr>
</table>
<h3 id="reusing-perlin-noise-data-for-multiple-thresholds">Reusing Perlin noise data for multiple thresholds</h3>
<p>You might want to use the same Perlin noise data to draw different colors at different thresholds. For example, you might want everything
below 20% to be water, above 20% to be grassland and above 80% to be mountains. For this reason, the Noise Data out port and the
<a href="../nodes.html#draw-noise-threshold">Draw Noise Threshold</a> were added. Please take a look at the <a href="../nodes.html#draw-noise-threshold">node index</a>,
to see how this node works.</p>
<p>If you want to know more about the <a href="../nodes.html#perlin-noise-fill-texture">Perlin Noise Fill Texture node</a>, you can find it in the
<a href="../nodes.html#perlin-noise-fill-texture">node index</a>.</p>
<h2 id="random-walker">Random Walker</h2>
<p>Another way to generate cave-like patterns, is by using the <a href="../nodes.html#random-walker">Random Walker node</a>. Basically, this uses an algorithm
that moves in random directions around the texture, coloring the pixels. If you want a more detailed description of how it does this, please
check out the <a href="../nodes.html#random-walker">node index</a>.</p>
<p>This node can be used to create patterns that look like interconnected cave systems. One of the nice features of this approach is that you don't
have to worry about connecting the different areas. Also, the way the caves are connected by the random walker tends to look more organic
than if you would <a href="adding_more_nodes.html#drawing-connections">draw connections</a> separately.</p>
<p>Other than the fill percentage it doesn't really have any customization options though. But you can combine it with other nodes to create
different results, of course.</p>
<p>Here's an example:
<img src="../images/tutorials/cave-like_maps/random_walker_example.png" alt="Random Walker example">
<em>The Random Walker randomly walks around the texture and colors the visited pixels black, until it's filled 30% of the texture.
The Extract Areas and Draw Areas nodes are used to remove some of the &quot;rubble&quot;.</em></p>
<h2 id="waveform-function-collapse-wfc">Waveform Function Collapse (WFC)</h2>
<p>WFC is an algorithm that's able to generate all kinds of random patterns based on a provided sample texture. To learn more about
the WFC node, please check out the <a href="../nodes.html#waveform-function-collapse">node index</a>.</p>
<p>There's also a <a href="../sample-based_maps.md">tutorial about sample-based maps</a>, that will go into greater detail about how WFC works.</p>
<p>By providing a cave-like sample texture, WFC can be used to generate all kinds of cave-like maps.</p>
<p>Here is a basic example graph:
<img src="../images/tutorials/cave-like_maps/wfc_basic_example.png" alt="WFC basic example"></p>
<p>Here is the sample used (cave-sample):
<img src="../images/tutorials/cave-like_maps/wfc_basic_example_sample.png" alt="WFC basic example sample"></p>
<h2 id="differences">Differences</h2>
<p>Which approach to use, really depends on the kind of result you're looking for.</p>
<p>The cellular automata, perlin noise and random walker approaches
tend to be less heavy on performance than the WFC approach. These approaches also don't require you to provide a sample
texture, like WFC does. However, because you're able to feed your own sample to WFC, you'll be able to generate very
specific patterns (cave-like or otherwise).</p>
<p>Perlin noise tends to give a more uniform result than the cellular automata approach. The advantage being that you're
guaranteed to have the texture more evenly populated with a cave pattern, but this will also mean that the results
tend to look more alike than the cellular automata approach.</p>
<h2 id="other-approaches">Other approaches</h2>
<p>While these approaches are a good starting point, they are by no means the only way to create cave-like maps with Map
Graph.</p>
<p>For example, you could combine these different approaches. Maybe you like the way Perlin noise is guaranteed to fill your texture
evenly and you like the smooth results of the cellular automata approach. There's nothing stopping you from connecting a
Perlin Noise Fill Texture node to a Cellular Automata Smoothing node to get the best of both worlds.</p>
<p>The number of approaches you can take are many and experimentation is very much encouraged!</p>
<h3 id="examples">Examples</h3>
<p>Here are just a couple of example graphs you could make, by combining different techniques in more complex ways.</p>
<p><img src="../images/tutorials/cave-like_maps/perlin_noise_smoothing_example.png" alt="Perlin noise smoothing example">
<em>Caves are generated using Perlin noise. The Cellular Automata Smoothing node, makes them nice and smooth.</em></p>
<p><img src="../images/tutorials/cave-like_maps/connected_points_example.png" alt="Connected points example">
<em>A bunch of random points are connected together. The connections are drawn as floors on top
of a texture that's initially completely filled with walls. Cellular Automata is then used to create nice round corners.</em></p>
<p><img src="../images/tutorials/cave-like_maps/connected_points_example_variation.png" alt="Connected points example variation">
<em>A variation of the graph above. Instead of using the Draw Connections (Shortest Path) node, it uses the Draw Connections
(Manhattan) node, resulting in more square looking shapes.</em></p>
</div>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="https://mapgraph.insanescatterbrain.com/styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="https://mapgraph.insanescatterbrain.com/styles/featherlight.min.js"></script>
    <script type="text/javascript" src="https://mapgraph.insanescatterbrain.com/styles/docfx.js"></script>
    <script type="text/javascript" src="https://mapgraph.insanescatterbrain.com/styles/main.js"></script>
  </body>
</html>
